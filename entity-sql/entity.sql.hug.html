<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>entity.sql.hug documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Entity-sql</span> <span class="project-version">0.1.1</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="intro.html"><div class="inner"><span>entity-sql</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1 current"><a href="entity.sql.hug.html"><div class="inner"><span>entity.sql.hug</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="entity.sql.hug.html#var-bind-connection"><div class="inner"><span>bind-connection</span></div></a></li><li class="depth-1"><a href="entity.sql.hug.html#var-connect.21"><div class="inner"><span>connect!</span></div></a></li><li class="depth-1"><a href="entity.sql.hug.html#var-disconnect.21"><div class="inner"><span>disconnect!</span></div></a></li><li class="depth-1"><a href="entity.sql.hug.html#var-make-config"><div class="inner"><span>make-config</span></div></a></li><li class="depth-1"><a href="entity.sql.hug.html#var-make-sql-fns"><div class="inner"><span>make-sql-fns</span></div></a></li><li class="depth-1"><a href="entity.sql.hug.html#var-with-transaction"><div class="inner"><span>with-transaction</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">entity.sql.hug</h1><div class="doc"><pre class="plaintext"></pre></div><div class="public anchor" id="var-bind-connection"><h3>bind-connection</h3><h4 class="type">macro</h4><div class="usage"><code>(bind-connection conn sql-file options)</code></div><div class="doc"><pre class="plaintext">Bind a db connection returned from connect! to the collection
of functions defined in sql-file, leaving the map of values to
satisfy the query as the only parameter. If the connection is
held in a dynamic variable it can be bound for use within a
transaction.

Options should be a nested map of entity-opts, hug-opts
and jdbc-opts each of which is a map of options at that level.

Returns an implementation of entity-core/IO.</pre></div><div class="src-link"><a href="https://github.com/inqwell/entity-sql/blob/master/src/entity/sql/hug.clj#L142">view source</a></div></div><div class="public anchor" id="var-connect.21"><h3>connect!</h3><div class="usage"><code>(connect! pool-spec)</code></div><div class="doc"><pre class="plaintext">Create a connection pool from the given pool-spec
</pre></div><div class="src-link"><a href="https://github.com/inqwell/entity-sql/blob/master/src/entity/sql/hug.clj#L98">view source</a></div></div><div class="public anchor" id="var-disconnect.21"><h3>disconnect!</h3><div class="usage"><code>(disconnect! conn)</code></div><div class="doc"><pre class="plaintext">Close the connection pool, if not already closed.
</pre></div><div class="src-link"><a href="https://github.com/inqwell/entity-sql/blob/master/src/entity/sql/hug.clj#L103">view source</a></div></div><div class="public anchor" id="var-make-config"><h3>make-config</h3><div class="usage"><code>(make-config {:keys [jdbc-url adapter datasource datasource-classname], :as pool-spec})</code></div><div class="doc"><pre class="plaintext">Validate a pool specification and support some alternative spec keys
</pre></div><div class="src-link"><a href="https://github.com/inqwell/entity-sql/blob/master/src/entity/sql/hug.clj#L82">view source</a></div></div><div class="public anchor" id="var-make-sql-fns"><h3>make-sql-fns</h3><div class="usage"><code>(make-sql-fns sql-file)</code><code>(make-sql-fns sql-file entity-opts)</code><code>(make-sql-fns sql-file entity-opts hug-opts)</code><code>(make-sql-fns sql-file entity-opts hug-opts jdbc-opts)</code></div><div class="doc"><pre class="plaintext">Process a SQL file turning its functions into ready-made queries. The
file must include a snippet called select-stmt, which will be applied
in usages of all queries.

  - entity-opts will be merged with the supplied parameter values when
    the function is called. These additional values may be used by
    SQL statements and the select snippet as required, for example to
    support SQL implementation specific choices.

  - hug-opts will be passed to the HugSQL generated function.

  - jdbc-opts will be passed to the HugSQL generated function, which
    in turn passes them to the underlying JDBC library call.</pre></div><div class="src-link"><a href="https://github.com/inqwell/entity-sql/blob/master/src/entity/sql/hug.clj#L43">view source</a></div></div><div class="public anchor" id="var-with-transaction"><h3>with-transaction</h3><h4 class="type">macro</h4><div class="usage"><code>(with-transaction args &amp; body)</code></div><div class="doc"><pre class="plaintext">Runs the body in a jdbc transaction using conn as the transaction connection.
The isolation level and readonly status of the transaction may also be specified.
(with-transaction [conn {:isolation level :read-only? true}]
  ... )
See clojure.java.jdbc/db-transaction* for more details on the transaction
options.</pre></div><div class="src-link"><a href="https://github.com/inqwell/entity-sql/blob/master/src/entity/sql/hug.clj#L166">view source</a></div></div></div></body></html>