<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>entity.core documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Entity-core</span> <span class="project-version">0.1.2</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="intro.html"><div class="inner"><span>entity-core</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>entity</span></div></div></li><li class="depth-2 branch"><a href="entity.aggregate.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>aggregate</span></div></a></li><li class="depth-2 branch current"><a href="entity.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><a href="entity.protocol.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>protocol</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="entity.core.html#var-defentity"><div class="inner"><span>defentity</span></div></a></li><li class="depth-1"><a href="entity.core.html#var-defenum"><div class="inner"><span>defenum</span></div></a></li><li class="depth-1"><a href="entity.core.html#var-defscalar"><div class="inner"><span>defscalar</span></div></a></li><li class="depth-1"><a href="entity.core.html#var-delete-instance"><div class="inner"><span>delete-instance</span></div></a></li><li class="depth-1"><a href="entity.core.html#var-entity-instance.3F"><div class="inner"><span>entity-instance?</span></div></a></li><li class="depth-1"><a href="entity.core.html#var-enum-sym"><div class="inner"><span>enum-sym</span></div></a></li><li class="depth-1"><a href="entity.core.html#var-enum-val"><div class="inner"><span>enum-val</span></div></a></li><li class="depth-1"><a href="entity.core.html#var-enum-val-fn"><div class="inner"><span>enum-val-fn</span></div></a></li><li class="depth-1"><a href="entity.core.html#var-find-entity"><div class="inner"><span>find-entity</span></div></a></li><li class="depth-1"><a href="entity.core.html#var-find-value"><div class="inner"><span>find-value</span></div></a></li><li class="depth-1"><a href="entity.core.html#var-get-alias"><div class="inner"><span>get-alias</span></div></a></li><li class="depth-1"><a href="entity.core.html#var-get-create-fn"><div class="inner"><span>get-create-fn</span></div></a></li><li class="depth-1"><a href="entity.core.html#var-get-destroy-fn"><div class="inner"><span>get-destroy-fn</span></div></a></li><li class="depth-1"><a href="entity.core.html#var-get-key-info"><div class="inner"><span>get-key-info</span></div></a></li><li class="depth-1"><a href="entity.core.html#var-get-mutate-fn"><div class="inner"><span>get-mutate-fn</span></div></a></li><li class="depth-1"><a href="entity.core.html#var-get-primary-key"><div class="inner"><span>get-primary-key</span></div></a></li><li class="depth-1"><a href="entity.core.html#var-key-val.3F"><div class="inner"><span>key-val?</span></div></a></li><li class="depth-1"><a href="entity.core.html#var-make-key"><div class="inner"><span>make-key</span></div></a></li><li class="depth-1"><a href="entity.core.html#var-new-instance"><div class="inner"><span>new-instance</span></div></a></li><li class="depth-1"><a href="entity.core.html#var-null-io"><div class="inner"><span>null-io</span></div></a></li><li class="depth-1"><a href="entity.core.html#var-primary-key-to-meta"><div class="inner"><span>primary-key-to-meta</span></div></a></li><li class="depth-1"><a href="entity.core.html#var-read-entity"><div class="inner"><span>read-entity</span></div></a></li><li class="depth-1"><a href="entity.core.html#var-write-instance"><div class="inner"><span>write-instance</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">entity.core</h1><div class="doc"><pre class="plaintext">Define domain types
</pre></div><div class="public anchor" id="var-defentity"><h3>defentity</h3><h4 class="type">macro</h4><div class="usage"><code>(defentity ent-name fields primary &amp; more)</code></div><div class="doc"><pre class="plaintext">Define a record type with fields, keys and any additional information
</pre></div><div class="src-link"><a href="https://github.com/inqwell/entity-core/blob/master/src/entity/core.cljc#L286">view source</a></div></div><div class="public anchor" id="var-defenum"><h3>defenum</h3><h4 class="type">macro</h4><div class="usage"><code>(defenum name symsvals default)</code></div><div class="doc"><pre class="plaintext">Define an enum type, mapping keywords to values, for example

  (defenum :foo/Active {:y 1
                        :n 0} :y)

defines the enum :foo/Active with two keyword symbols and
corresponding values, and whose default is :y</pre></div><div class="src-link"><a href="https://github.com/inqwell/entity-core/blob/master/src/entity/core.cljc#L91">view source</a></div></div><div class="public anchor" id="var-defscalar"><h3>defscalar</h3><h4 class="type">macro</h4><div class="usage"><code>(defscalar name val)</code></div><div class="doc"><pre class="plaintext">Define a scalar type, for example:

  (defscalar :foo/Money 0.00M

defines the type :foo/Money as a big decimal with 2 decimal
places of accuracy.</pre></div><div class="src-link"><a href="https://github.com/inqwell/entity-core/blob/master/src/entity/core.cljc#L75">view source</a></div></div><div class="public anchor" id="var-delete-instance"><h3>delete-instance</h3><div class="usage"><code>(delete-instance instance)</code></div><div class="doc"><pre class="plaintext">Delete the given entity instance from its persistent storage.
</pre></div><div class="src-link"><a href="https://github.com/inqwell/entity-core/blob/master/src/entity/core.cljc#L616">view source</a></div></div><div class="public anchor" id="var-entity-instance.3F"><h3>entity-instance?</h3><div class="usage"><code>(entity-instance? arg entity)</code></div><div class="doc"><pre class="plaintext">Returns true if the argument is an instance of the given entity. The
entity can be a keyword (a literal referral to the domain type) or
an instance (from which the type will be determined).
If arg is not an instance of entity, returns false.</pre></div><div class="src-link"><a href="https://github.com/inqwell/entity-core/blob/master/src/entity/core.cljc#L463">view source</a></div></div><div class="public anchor" id="var-enum-sym"><h3>enum-sym</h3><h4 class="type">macro</h4><div class="usage"><code>(enum-sym enum val)</code></div><div class="doc"><pre class="plaintext">Return the symbol for a given domain enum type and value
</pre></div><div class="src-link"><a href="https://github.com/inqwell/entity-core/blob/master/src/entity/core.cljc#L132">view source</a></div></div><div class="public anchor" id="var-enum-val"><h3>enum-val</h3><h4 class="type">macro</h4><div class="usage"><code>(enum-val enum sym)</code></div><div class="doc"><pre class="plaintext">Return the value for the given domain enum type and symbol
</pre></div><div class="src-link"><a href="https://github.com/inqwell/entity-core/blob/master/src/entity/core.cljc#L127">view source</a></div></div><div class="public anchor" id="var-enum-val-fn"><h3>enum-val-fn</h3><div class="usage"><code>(enum-val-fn enum sym)</code></div><div class="doc"><pre class="plaintext">Return the value for the given domain enum type and symbol
</pre></div><div class="src-link"><a href="https://github.com/inqwell/entity-core/blob/master/src/entity/core.cljc#L122">view source</a></div></div><div class="public anchor" id="var-find-entity"><h3>find-entity</h3><div class="usage"><code>(find-entity entity)</code></div><div class="doc"><pre class="plaintext">Find the type from the given keyword ref
</pre></div><div class="src-link"><a href="https://github.com/inqwell/entity-core/blob/master/src/entity/core.cljc#L323">view source</a></div></div><div class="public anchor" id="var-find-value"><h3>find-value</h3><div class="usage"><code>(find-value scalar)</code><code>(find-value entity field)</code></div><div class="doc"><pre class="plaintext">Find a value from the types catalog. Two args means type:field.
Single arg means scalar. If type:field does not resolve then field is
considered a key name, returning the key proto if found.</pre></div><div class="src-link"><a href="https://github.com/inqwell/entity-core/blob/master/src/entity/core.cljc#L338">view source</a></div></div><div class="public anchor" id="var-get-alias"><h3>get-alias</h3><div class="usage"><code>(get-alias instance)</code></div><div class="doc"><pre class="plaintext">Return a keyword that can be used to associate the
instance in a map. This will be either its unqualified
name or any alias that was specified when defined.</pre></div><div class="src-link"><a href="https://github.com/inqwell/entity-core/blob/master/src/entity/core.cljc#L509">view source</a></div></div><div class="public anchor" id="var-get-create-fn"><h3>get-create-fn</h3><div class="usage"><code>(get-create-fn instance)</code></div><div class="doc"><pre class="plaintext">Return the function that can be called to correctly initialise this
and anything other required in the domain.</pre></div><div class="src-link"><a href="https://github.com/inqwell/entity-core/blob/master/src/entity/core.cljc#L523">view source</a></div></div><div class="public anchor" id="var-get-destroy-fn"><h3>get-destroy-fn</h3><div class="usage"><code>(get-destroy-fn instance)</code></div><div class="doc"><pre class="plaintext">Return the function that can be called to destroy this
and anything else required in the domain.</pre></div><div class="src-link"><a href="https://github.com/inqwell/entity-core/blob/master/src/entity/core.cljc#L539">view source</a></div></div><div class="public anchor" id="var-get-key-info"><h3>get-key-info</h3><div class="usage"><code>(get-key-info entity key-name)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/inqwell/entity-core/blob/master/src/entity/core.cljc#L398">view source</a></div></div><div class="public anchor" id="var-get-mutate-fn"><h3>get-mutate-fn</h3><div class="usage"><code>(get-mutate-fn instance)</code></div><div class="doc"><pre class="plaintext">Return the function that can be called to verify what changes are
allowed and perform any consequential actions in the domain.</pre></div><div class="src-link"><a href="https://github.com/inqwell/entity-core/blob/master/src/entity/core.cljc#L531">view source</a></div></div><div class="public anchor" id="var-get-primary-key"><h3>get-primary-key</h3><div class="usage"><code>(get-primary-key instance)</code></div><div class="doc"><pre class="plaintext">Return the instance's primary key from its meta data.
If not found, throws, if identifiable as the primary key
itself then returns the argument</pre></div><div class="src-link"><a href="https://github.com/inqwell/entity-core/blob/master/src/entity/core.cljc#L561">view source</a></div></div><div class="public anchor" id="var-key-val.3F"><h3>key-val?</h3><div class="usage"><code>(key-val? arg)</code></div><div class="doc"><pre class="plaintext">Returns true if the argument appears to be a value returned
by make-key</pre></div><div class="src-link"><a href="https://github.com/inqwell/entity-core/blob/master/src/entity/core.cljc#L456">view source</a></div></div><div class="public anchor" id="var-make-key"><h3>make-key</h3><div class="usage"><code>(make-key key-val entity key-name)</code></div><div class="doc"><pre class="plaintext">Make a key value. Returns a map comprising only the map keys
for the given domain key name. Any missing fields are
nil (or explicit default value); additional
fields are ignored.</pre></div><div class="src-link"><a href="https://github.com/inqwell/entity-core/blob/master/src/entity/core.cljc#L476">view source</a></div></div><div class="public anchor" id="var-new-instance"><h3>new-instance</h3><div class="usage"><code>(new-instance entity)</code><code>(new-instance entity ent-val)</code></div><div class="doc"><pre class="plaintext">Make an instance of the specified type, setting any fields
when an initial value is given. Any missing fields remain their
default values; additional fields are ignored.</pre></div><div class="src-link"><a href="https://github.com/inqwell/entity-core/blob/master/src/entity/core.cljc#L547">view source</a></div></div><div class="public anchor" id="var-null-io"><h3>null-io</h3><div class="usage"></div><div class="doc"><pre class="plaintext">I/O that does nothing
</pre></div><div class="src-link"><a href="https://github.com/inqwell/entity-core/blob/master/src/entity/core.cljc#L20">view source</a></div></div><div class="public anchor" id="var-primary-key-to-meta"><h3>primary-key-to-meta</h3><div class="usage"><code>(primary-key-to-meta instance)</code></div><div class="doc"><pre class="plaintext">Augment the instance meta data with the primary key.
This can only be done when the primary key is established,
but it is trusted this is so</pre></div><div class="src-link"><a href="https://github.com/inqwell/entity-core/blob/master/src/entity/core.cljc#L494">view source</a></div></div><div class="public anchor" id="var-read-entity"><h3>read-entity</h3><div class="usage"><code>(read-entity key-val)</code><code>(read-entity entity-name key-val)</code><code>(read-entity key-val entity-name key-name)</code></div><div class="doc"><pre class="plaintext">Read the given entity, applying the key value
</pre></div><div class="src-link"><a href="https://github.com/inqwell/entity-core/blob/master/src/entity/core.cljc#L576">view source</a></div></div><div class="public anchor" id="var-write-instance"><h3>write-instance</h3><div class="usage"><code>(write-instance instance)</code></div><div class="doc"><pre class="plaintext">Write the given entity instance to its persistent storage
</pre></div><div class="src-link"><a href="https://github.com/inqwell/entity-core/blob/master/src/entity/core.cljc#L605">view source</a></div></div></div></body></html>