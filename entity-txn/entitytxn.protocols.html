<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>entitytxn.protocols documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Entity-txn</span> <span class="project-version">0.1.0</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="intro.html"><div class="inner"><span>entity-txn</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>entitytxn</span></div></div></li><li class="depth-2 branch"><a href="entitytxn.aggregate.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>aggregate</span></div></a></li><li class="depth-2 branch"><a href="entitytxn.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="entitytxn.entity.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>entity</span></div></a></li><li class="depth-2 branch"><a href="entitytxn.lock.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>lock</span></div></a></li><li class="depth-2 current"><a href="entitytxn.protocols.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>protocols</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="entitytxn.protocols.html#var-TxnEvents"><div class="inner"><span>TxnEvents</span></div></a></li><li class="depth-2 branch"><a href="entitytxn.protocols.html#var-create-entity"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>create-entity</span></div></a></li><li class="depth-2 branch"><a href="entitytxn.protocols.html#var-delete-entity"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>delete-entity</span></div></a></li><li class="depth-2 branch"><a href="entitytxn.protocols.html#var-destroy-entity"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>destroy-entity</span></div></a></li><li class="depth-2 branch"><a href="entitytxn.protocols.html#var-identity-of"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>identity-of</span></div></a></li><li class="depth-2 branch"><a href="entitytxn.protocols.html#var-mutate-entity"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>mutate-entity</span></div></a></li><li class="depth-2 branch"><a href="entitytxn.protocols.html#var-new-instance"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>new-instance</span></div></a></li><li class="depth-2 branch"><a href="entitytxn.protocols.html#var-read-entity"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>read-entity</span></div></a></li><li class="depth-2"><a href="entitytxn.protocols.html#var-write-entity"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>write-entity</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">entitytxn.protocols</h1><div class="doc"><pre class="plaintext">Protocols and multimethods for interfacing transaction
events to actions.</pre></div><div class="public anchor" id="var-TxnEvents"><h3>TxnEvents</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><pre class="plaintext">Link transaction events to implementations
</pre></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-create-entity"><h3>create-entity</h3><div class="usage"><code>(create-entity txn-event entity-val)</code></div><div class="doc"><pre class="plaintext">A new, as yet unmanaged domain instance is being created in the
transaction. Returns the instance to be created when the transaction
commits.</pre></div></div><div class="public anchor" id="var-delete-entity"><h3>delete-entity</h3><div class="usage"><code>(delete-entity txn-event entity-val)</code></div><div class="doc"><pre class="plaintext">Delete the instance in its backing store.
</pre></div></div><div class="public anchor" id="var-destroy-entity"><h3>destroy-entity</h3><div class="usage"><code>(destroy-entity txn-event entity-val)</code></div><div class="doc"><pre class="plaintext">An existing, manged instance is being deleted in the
transaction.</pre></div></div><div class="public anchor" id="var-identity-of"><h3>identity-of</h3><div class="usage"><code>(identity-of txn-event entity-val)</code></div><div class="doc"><pre class="plaintext">Return the identity of the given value. If the argument is
the identity itself then return that. If the identity cannot
be determined then throws. An identity must be unique across
participating instances.</pre></div></div><div class="public anchor" id="var-mutate-entity"><h3>mutate-entity</h3><div class="usage"><code>(mutate-entity txn-event old-val new-val)</code></div><div class="doc"><pre class="plaintext">An existing instance is being mutated. This event occurs during
the commit phase and notifies the domain so that it may validate,
veto by an exception or make further domain changes in the transaction.
Returns the current in-transaction value.</pre></div></div><div class="public anchor" id="var-new-instance"><h3>new-instance</h3><div class="usage"><code>(new-instance txn-event args)</code></div><div class="doc"><pre class="plaintext">Return a new, unmanaged domain prototype.
</pre></div></div><div class="public anchor" id="var-read-entity"><h3>read-entity</h3><div class="usage"><code>(read-entity txn-event key-val args)</code></div><div class="doc"><pre class="plaintext">Read none, one or more entity instances from their backing store
by applying key-val and optional args.</pre></div></div><div class="public anchor" id="var-write-entity"><h3>write-entity</h3><div class="usage"><code>(write-entity txn-event entity-val)</code></div><div class="doc"><pre class="plaintext">Write the given instance to its backing store.
</pre></div></div></div></div><div class="src-link"><a href="https://github.com/inqwell/entity-txn/blob/master/src/entitytxn/protocols.clj#L5">view source</a></div></div></div></body></html>